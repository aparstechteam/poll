import{r as g,o as a,e as c,f as e,q as i,x as b,h as p,y as A,z as C,U as O,Y as S,k as P,m,v as _,A as j,F as k,g as q,S as D,d as w,t as $,j as U,_ as E}from"./index-56f83e6b.js";const I=e("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),M={class:"fixed inset-0 overflow-y-auto"},W={class:"flex items-center justify-center min-h-full p-4 text-center"},N={class:"mt-2"},z={class:"form-control"},B=e("label",{for:"question",class:"label"},"Poll Question",-1),L={class:"form-control"},T=e("label",{for:"question",class:"label"},"Poll Expiry Date",-1),F={class:"form-control"},K={class:"cursor-pointer label"},Q=e("span",{class:"label-text"},"Show Voters",-1),R=e("label",{for:"option",class:"label"},"Poll Option",-1),Y=["onUpdate:modelValue"],G=e("label",{for:"option",class:"label"},"Poll Option Image Link(Drive)",-1),H=["onUpdate:modelValue"],J={class:"my-2"},X=["onClick"],Z=e("div",{class:"form-control"},[e("label",{for:"question",class:"label"},"Status"),e("select",{class:"select select-bordered"},[e("option",{value:"active"},"Active"),e("option",{value:"inactive"},"Inactive")])],-1),ee={__name:"CreatePoll",setup(v){const t=g({question:"",expiredAt:"",showVoters:!1,options:[{text:"",votes:0}]}),s=g(!1);function r(){s.value=!1}function h(){s.value=!0}function x(){w.post("/polls",t.value).then(n=>{console.log(n),r()}).catch(n=>{console.log(n)})}function y(){t.value.options.push({text:"",image:"",votes:0})}const u=n=>{t.value.options.splice(n,1)};return(n,o)=>(a(),c(k,null,[e("button",{type:"button",onClick:h,class:"px-4 py-2 text-sm font-medium text-white bg-black rounded-md hover:bg-opacity-30 focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75"}," Create Poll "),i(p(D),{appear:"",show:s.value,as:"template"},{default:b(()=>[i(p(A),{as:"div",onClose:r,class:"relative z-10"},{default:b(()=>[i(p(C),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:b(()=>[I]),_:1}),e("div",M,[e("div",W,[i(p(C),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:b(()=>[i(p(O),{class:"w-full max-w-md p-6 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl"},{default:b(()=>[i(p(S),{as:"h3",class:"text-lg font-medium leading-6 text-gray-900"},{default:b(()=>[P(" Create a Poll ")]),_:1}),e("div",N,[e("div",z,[B,m(e("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=l=>t.value.question=l),placeholder:"What's the question?",class:"input input-bordered"},null,512),[[_,t.value.question]])]),e("div",L,[T,m(e("input",{type:"datetime-local","onUpdate:modelValue":o[1]||(o[1]=l=>t.value.expiredAt=l),placeholder:"",class:"input input-bordered"},null,512),[[_,t.value.expiredAt]])]),e("div",F,[e("label",K,[Q,m(e("input",{type:"checkbox",checked:"checked","onUpdate:modelValue":o[2]||(o[2]=l=>t.value.showVoters=l),class:"checkbox checkbox-primary"},null,512),[[j,t.value.showVoters]])])]),(a(!0),c(k,null,q(t.value.options,(l,d)=>(a(),c("div",{key:d,class:"form-control"},[R,m(e("input",{type:"text","onUpdate:modelValue":f=>t.value.options[d].text=f,class:"input input-bordered",placeholder:"What's the option?"},null,8,Y),[[_,t.value.options[d].text]]),G,m(e("input",{type:"text","onUpdate:modelValue":f=>t.value.options[d].image=f,class:"input input-bordered",placeholder:"What's the option?"},null,8,H),[[_,t.value.options[d].image]]),e("div",J,[e("button",{class:"bg-red-500 btn btn-sm btn-error",onClick:f=>u(d)}," delete ",8,X)])]))),128)),e("div",{class:"mt-5"},[e("button",{onClick:y,class:"btn btn-sm"}," Add Option ")]),Z]),e("div",{class:"mt-4 text-right"},[e("button",{type:"button",class:"inline-flex justify-center px-4 py-2 text-sm font-medium text-blue-900 bg-blue-100 border border-transparent rounded-md hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",onClick:x}," Create Poll "),P(),e("button",{type:"button",class:"inline-flex justify-center px-4 py-2 text-sm font-medium text-blue-900 bg-blue-100 border border-transparent rounded-md hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",onClick:r}," Cancel ")])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])],64))}},te=e("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),oe={class:"fixed inset-0 overflow-y-auto"},se={class:"flex items-center justify-center min-h-full p-4 text-center"},le={class:"mt-2"},ne={class:"form-control"},ie=e("label",{for:"question",class:"label"},"Poll Question",-1),ae={class:"form-control"},ce=e("label",{for:"question",class:"label"},"Poll Expiry Date",-1),ue={class:"form-control"},re={class:"cursor-pointer label"},de=e("span",{class:"label-text"},"Show Voters",-1),pe=e("label",{for:"option",class:"label"},"Poll Option",-1),be=["onUpdate:modelValue"],ve=e("label",{for:"option",class:"label"},"Poll Option Image Link(Drive)",-1),fe=["onUpdate:modelValue"],me={class:"my-2"},he=["onClick"],_e=e("div",{class:"form-control"},[e("label",{for:"question",class:"label"},"Status"),e("select",{class:"select select-bordered"},[e("option",{value:"active"},"Active"),e("option",{value:"inactive"},"Inactive")])],-1),xe={__name:"EditPoll",props:{epoll:{type:Object,required:!0}},setup(v){const{epoll:t}=v,s=g({...t}),r=g(!1);function h(){r.value=!1}function x(){r.value=!0}function y(){w.put("/polls/"+t._id,s.value).then(o=>{console.log(o),h()}).catch(o=>{console.log(o)})}function u(){s.value.options.push({text:"",votes:0})}const n=o=>{s.value.options.splice(o,1)};return(o,l)=>(a(),c(k,null,[e("button",{type:"button",onClick:x,class:"px-4 py-2 text-sm font-medium text-white bg-black rounded-md hover:bg-opacity-30 focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75"}," Edit "),i(p(D),{appear:"",show:r.value,as:"template"},{default:b(()=>[i(p(A),{as:"div",onClose:h,class:"relative z-10"},{default:b(()=>[i(p(C),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:b(()=>[te]),_:1}),e("div",oe,[e("div",se,[i(p(C),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:b(()=>[i(p(O),{class:"w-full max-w-md p-6 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl"},{default:b(()=>[i(p(S),{as:"h3",class:"text-lg font-medium leading-6 text-gray-900"},{default:b(()=>[P(" Edit Poll ")]),_:1}),e("div",le,[e("div",ne,[ie,m(e("input",{type:"text","onUpdate:modelValue":l[0]||(l[0]=d=>s.value.question=d),placeholder:"What's the question?",class:"input input-bordered"},null,512),[[_,s.value.question]])]),e("div",ae,[ce,m(e("input",{type:"datetime-local","onUpdate:modelValue":l[1]||(l[1]=d=>s.value.expiredAt=d),placeholder:"",class:"input input-bordered"},null,512),[[_,s.value.expiredAt]])]),e("div",ue,[e("label",re,[de,m(e("input",{type:"checkbox",checked:"checked","onUpdate:modelValue":l[2]||(l[2]=d=>s.value.showVoters=d),class:"checkbox checkbox-primary"},null,512),[[j,s.value.showVoters]])])]),(a(!0),c(k,null,q(s.value.options,(d,f)=>(a(),c("div",{key:f,class:"form-control"},[pe,m(e("input",{type:"text","onUpdate:modelValue":V=>s.value.options[f].text=V,class:"input input-bordered",placeholder:"What's the option?"},null,8,be),[[_,s.value.options[f].text]]),ve,m(e("input",{type:"text","onUpdate:modelValue":V=>s.value.options[f].image=V,class:"input input-bordered",placeholder:"What's the option?"},null,8,fe),[[_,s.value.options[f].image]]),e("div",me,[e("button",{class:"bg-red-500 btn btn-sm btn-error",onClick:V=>n(f)}," delete ",8,he)])]))),128)),e("div",{class:"mt-5"},[e("button",{onClick:u,class:"btn btn-sm"}," Add Option ")]),_e]),e("div",{class:"mt-4 text-right"},[e("button",{type:"button",class:"inline-flex justify-center px-4 py-2 text-sm font-medium text-blue-900 bg-blue-100 border border-transparent rounded-md hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",onClick:y}," Update Poll "),P(),e("button",{type:"button",class:"inline-flex justify-center px-4 py-2 text-sm font-medium text-blue-900 bg-blue-100 border border-transparent rounded-md hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",onClick:h}," Cancel ")])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])],64))}},ge={class:"text-lg font-semibold"},ye={key:0,class:"mt-2 space-y-3"},$e={class:"mt-5 space-y-5"},ke={class:"flex"},we={class:"flex items-center flex-1"},Ve={key:0,class:"mr-2"},Ce=["src"],Pe={class:"text-lg font-semibold"},qe=e("div",null,null,-1),Ue={class:"flex items-center w-full gap-3 mt-2"},Ae=["value"],Oe={class:"text-sm font-bold text-gray-900"},Se={class:"flex gap-3"},je={class:"btn btn-sm"},De={class:"flex justify-between mt-5"},Ee={class:"space-x-4 text-right"},Ie={class:"px-4 py-2 text-sm font-medium text-white rounded-md bg-emerald-500 hover:bg-opacity-80 focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-90"},Me={class:"px-4 py-2 text-sm font-medium text-white bg-orange-500 rounded-md hover:bg-opacity-80 focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-90"},We={__name:"AdminPoll",props:{p:{type:Object,required:!0}},emits:["deletePolls"],setup(v,{emit:t}){const{p:s}=v,r=()=>{t("deletePolls",s._id)},h=()=>{t("resetVotes",s._id)};return(x,y)=>(a(),c("div",null,[e("h1",ge,$(v.p.question),1),v.p.options?(a(),c("div",ye,[e("div",$e,[(a(!0),c(k,null,q(v.p.options,u=>(a(),c("div",{class:"px-3 py-2 border rounded-lg",key:u._id},[e("div",ke,[e("div",we,[u.image?(a(),c("div",Ve,[e("img",{class:"h-20 rounded-lg aspect-square",src:`https://drive.google.com/uc?id=${u.image.substr(32,33)}`,alt:""},null,8,Ce)])):U("",!0),e("p",Pe,$(u.text),1)]),qe]),e("div",Ue,[e("progress",{class:"progress progress-info",max:"100",value:u.percentage},null,8,Ae),e("p",Oe,$(u.percentage)+"%",1)]),e("div",Se,[i(E,{optionId:u._id},null,8,["optionId"]),e("button",je," Votes: "+$(u.votes),1)])]))),128))])])):U("",!0),e("div",De,[e("div",Ee,[e("button",Ie," Status: "+$(v.p.status.toUpperCase()),1),e("button",Me," Total: "+$(v.p.totalVotes),1),i(xe,{epoll:v.p},null,8,["epoll"]),e("button",{onClick:r,class:"px-4 py-2 text-sm font-medium text-white bg-red-500 rounded-md hover:bg-opacity-80 focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-90"},"Delete"),e("button",{onClick:h,class:"px-4 py-2 text-sm font-medium text-white rounded-md bg-violet-500 hover:bg-opacity-80 focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-90"},"Reset")])])]))}},Ne={key:0,class:"max-w-4xl py-10 mx-auto"},ze={class:"flex justify-between my-3"},Be=e("h1",{class:"text-2xl font-bold text-center"},"Polls",-1),Le={class:"space-y-5"},Te={key:1,class:"max-w-2xl mx-auto card"},Fe={class:"form-control"},Ke=e("label",{for:""},[e("span",{class:"label-text"},"Enter Secret Key")],-1),Re={__name:"Admin",setup(v){const t=g([]);let s=g(localStorage.getItem("voteadmin"));const r=g(""),h=()=>{r.value=="vote1234"?(s.value=!0,localStorage.setItem("voteadmin",!0)):alert("Wrong Password")},x=()=>{w.get("/polls").then(n=>{t.value=n.data.map(o=>(o.options=o.options.map(l=>(l.percentage=Math.round(l.votes/o.totalVotes*100)||0,l)),o))})};x();const y=n=>{w.delete(`/polls/${n}`).then(o=>{t.value=t.value.filter(l=>l._id!==n),x()})},u=n=>{w.delete(`/polls/${n}/reset`).then(o=>{x()}).catch(o=>{console.log(o)})};return(n,o)=>p(s)?(a(),c("div",Ne,[e("div",ze,[Be,i(ee)]),e("div",Le,[(a(!0),c(k,null,q(t.value,l=>(a(),c("div",{key:l._id,class:"p-5 border border-gray-300"},[i(We,{p:l,onDeletePolls:y,onResetVotes:u},null,8,["p"])]))),128))])])):(a(),c("div",Te,[e("div",Fe,[Ke,m(e("input",{type:"text",placeholder:"Enter Secret Key",class:"input input-bordered","onUpdate:modelValue":o[0]||(o[0]=l=>r.value=l)},null,512),[[_,r.value]])]),e("button",{class:"mt-3 btn",onClick:h}," Continue ")]))}};export{Re as default};
