import{r as g,o as c,e as r,f as e,q as i,x as v,h as p,y as A,z as C,U as O,Y as D,k as P,m as b,v as h,A as S,F as k,g as q,S as j,d as w,t as $,j as U,_ as I}from"./index-5bf3adaa.js";const E=e("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),L={class:"fixed inset-0 overflow-y-auto"},M={class:"flex items-center justify-center min-h-full p-4 text-center"},W={class:"mt-2"},N={class:"form-control"},Q=e("label",{for:"question",class:"label"},"Poll Question",-1),z={class:"form-control"},B=e("label",{for:"question",class:"label"},"Poll Question Image(Drive Link)",-1),T={class:"form-control"},F=e("label",{for:"question",class:"label"},"Poll Expiry Date",-1),K={class:"form-control"},R={class:"cursor-pointer label"},Y=e("span",{class:"label-text"},"Show Voters",-1),G=e("label",{for:"option",class:"label"},"Poll Option",-1),H=["onUpdate:modelValue"],J=e("label",{for:"option",class:"label"},"Poll Option Image Link(Drive)",-1),X=["onUpdate:modelValue"],Z={class:"my-2"},ee=["onClick"],te=e("div",{class:"form-control"},[e("label",{for:"question",class:"label"},"Status"),e("select",{class:"select select-bordered"},[e("option",{value:"active"},"Active"),e("option",{value:"inactive"},"Inactive")])],-1),oe={__name:"CreatePoll",setup(m){const t=g({question:"",expiredAt:"",image:"",showVoters:!1,options:[{text:"",votes:0}]}),l=g(!1);function d(){l.value=!1}function _(){l.value=!0}function x(){w.post("/polls",t.value).then(n=>{console.log(n),d()}).catch(n=>{console.log(n)})}function y(){t.value.options.push({text:"",image:"",votes:0})}const u=n=>{t.value.options.splice(n,1)};return(n,s)=>(c(),r(k,null,[e("button",{type:"button",onClick:_,class:"px-4 py-2 text-sm font-medium text-white bg-black rounded-md hover:bg-opacity-30 focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75"}," Create Poll "),i(p(j),{appear:"",show:l.value,as:"template"},{default:v(()=>[i(p(A),{as:"div",onClose:d,class:"relative z-10"},{default:v(()=>[i(p(C),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:v(()=>[E]),_:1}),e("div",L,[e("div",M,[i(p(C),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:v(()=>[i(p(O),{class:"w-full max-w-md p-6 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl"},{default:v(()=>[i(p(D),{as:"h3",class:"text-lg font-medium leading-6 text-gray-900"},{default:v(()=>[P(" Create a Poll ")]),_:1}),e("div",W,[e("div",N,[Q,b(e("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=o=>t.value.question=o),placeholder:"What's the question?",class:"input input-bordered"},null,512),[[h,t.value.question]])]),e("div",z,[B,b(e("input",{type:"text","onUpdate:modelValue":s[1]||(s[1]=o=>t.value.image=o),placeholder:"Drive Link",class:"input input-bordered"},null,512),[[h,t.value.image]])]),e("div",T,[F,b(e("input",{type:"datetime-local","onUpdate:modelValue":s[2]||(s[2]=o=>t.value.expiredAt=o),placeholder:"",class:"input input-bordered"},null,512),[[h,t.value.expiredAt]])]),e("div",K,[e("label",R,[Y,b(e("input",{type:"checkbox",checked:"checked","onUpdate:modelValue":s[3]||(s[3]=o=>t.value.showVoters=o),class:"checkbox checkbox-primary"},null,512),[[S,t.value.showVoters]])])]),(c(!0),r(k,null,q(t.value.options,(o,a)=>(c(),r("div",{key:a,class:"form-control"},[G,b(e("input",{type:"text","onUpdate:modelValue":f=>t.value.options[a].text=f,class:"input input-bordered",placeholder:"What's the option?"},null,8,H),[[h,t.value.options[a].text]]),J,b(e("input",{type:"text","onUpdate:modelValue":f=>t.value.options[a].image=f,class:"input input-bordered",placeholder:"What's the option?"},null,8,X),[[h,t.value.options[a].image]]),e("div",Z,[e("button",{class:"bg-red-500 btn btn-sm btn-error",onClick:f=>u(a)}," delete ",8,ee)])]))),128)),e("div",{class:"mt-5"},[e("button",{onClick:y,class:"btn btn-sm"}," Add Option ")]),te]),e("div",{class:"mt-4 text-right"},[e("button",{type:"button",class:"inline-flex justify-center px-4 py-2 text-sm font-medium text-blue-900 bg-blue-100 border border-transparent rounded-md hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",onClick:x}," Create Poll "),P(),e("button",{type:"button",class:"inline-flex justify-center px-4 py-2 text-sm font-medium text-blue-900 bg-blue-100 border border-transparent rounded-md hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",onClick:d}," Cancel ")])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])],64))}},se=e("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),le={class:"fixed inset-0 overflow-y-auto"},ne={class:"flex items-center justify-center min-h-full p-4 text-center"},ie={class:"mt-2"},ae={class:"form-control"},ce=e("label",{for:"question",class:"label"},"Poll Question",-1),re={class:"form-control"},ue=e("label",{for:"question",class:"label"},"Poll Question Image(Drive Link)",-1),de={class:"form-control"},pe=e("label",{for:"question",class:"label"},"Poll Expiry Date",-1),be={class:"form-control"},me={class:"cursor-pointer label"},ve=e("span",{class:"label-text"},"Show Voters",-1),fe=e("label",{for:"option",class:"label"},"Poll Option",-1),he=["onUpdate:modelValue"],_e=e("label",{for:"option",class:"label"},"Poll Option Image Link(Drive)",-1),xe=["onUpdate:modelValue"],ge={class:"my-2"},ye=["onClick"],$e=e("div",{class:"form-control"},[e("label",{for:"question",class:"label"},"Status"),e("select",{class:"select select-bordered"},[e("option",{value:"active"},"Active"),e("option",{value:"inactive"},"Inactive")])],-1),ke={__name:"EditPoll",props:{epoll:{type:Object,required:!0}},setup(m){const{epoll:t}=m,l=g({...t,expiredAt:t.expiredAt.split(".")[0]}),d=g(!1);function _(){d.value=!1}function x(){d.value=!0}function y(){w.put("/polls/"+t._id,l.value).then(s=>{console.log(s),_()}).catch(s=>{console.log(s)})}function u(){l.value.options.push({text:"",votes:0})}const n=s=>{l.value.options.splice(s,1)};return(s,o)=>(c(),r(k,null,[e("button",{type:"button",onClick:x,class:"px-4 py-2 text-sm font-medium text-white bg-black rounded-md hover:bg-opacity-30 focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75"}," Edit "),i(p(j),{appear:"",show:d.value,as:"template"},{default:v(()=>[i(p(A),{as:"div",onClose:_,class:"relative z-10"},{default:v(()=>[i(p(C),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:v(()=>[se]),_:1}),e("div",le,[e("div",ne,[i(p(C),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:v(()=>[i(p(O),{class:"w-full max-w-md p-6 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl"},{default:v(()=>[i(p(D),{as:"h3",class:"text-lg font-medium leading-6 text-gray-900"},{default:v(()=>[P(" Edit Poll ")]),_:1}),e("div",ie,[e("div",ae,[ce,b(e("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=a=>l.value.question=a),placeholder:"What's the question?",class:"input input-bordered"},null,512),[[h,l.value.question]])]),e("div",re,[ue,b(e("input",{type:"text","onUpdate:modelValue":o[1]||(o[1]=a=>l.value.image=a),placeholder:"Drive Link",class:"input input-bordered"},null,512),[[h,l.value.image]])]),e("div",de,[pe,b(e("input",{type:"datetime-local","onUpdate:modelValue":o[2]||(o[2]=a=>l.value.expiredAt=a),placeholder:"",class:"input input-bordered"},null,512),[[h,l.value.expiredAt]])]),e("div",be,[e("label",me,[ve,b(e("input",{type:"checkbox",checked:"checked","onUpdate:modelValue":o[3]||(o[3]=a=>l.value.showVoters=a),class:"checkbox checkbox-primary"},null,512),[[S,l.value.showVoters]])])]),(c(!0),r(k,null,q(l.value.options,(a,f)=>(c(),r("div",{key:f,class:"form-control"},[fe,b(e("input",{type:"text","onUpdate:modelValue":V=>l.value.options[f].text=V,class:"input input-bordered",placeholder:"What's the option?"},null,8,he),[[h,l.value.options[f].text]]),_e,b(e("input",{type:"text","onUpdate:modelValue":V=>l.value.options[f].image=V,class:"input input-bordered",placeholder:"What's the option?"},null,8,xe),[[h,l.value.options[f].image]]),e("div",ge,[e("button",{class:"bg-red-500 btn btn-sm btn-error",onClick:V=>n(f)}," delete ",8,ye)])]))),128)),e("div",{class:"mt-5"},[e("button",{onClick:u,class:"btn btn-sm"}," Add Option ")]),$e]),e("div",{class:"mt-4 text-right"},[e("button",{type:"button",class:"inline-flex justify-center px-4 py-2 text-sm font-medium text-blue-900 bg-blue-100 border border-transparent rounded-md hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",onClick:y}," Update Poll "),P(),e("button",{type:"button",class:"inline-flex justify-center px-4 py-2 text-sm font-medium text-blue-900 bg-blue-100 border border-transparent rounded-md hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",onClick:_}," Cancel ")])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])],64))}},we=["src"],Ve={class:"text-lg font-semibold text-center"},Ce={key:0,class:"mt-2 space-y-3"},Pe={class:"mt-5 space-y-5"},qe={class:"flex"},Ue={class:"flex items-center flex-1"},Ae={key:0,class:"mr-2"},Oe=["src"],De={class:"text-lg font-semibold"},Se=e("div",null,null,-1),je={class:"flex items-center w-full gap-3 mt-2"},Ie=["value"],Ee={class:"text-sm font-bold text-gray-900"},Le={class:"flex gap-3"},Me={class:"btn btn-sm"},We={class:"flex justify-between mt-5"},Ne={class:"space-x-4 text-right"},Qe={class:"px-4 py-2 text-sm font-medium text-white rounded-md bg-emerald-500 hover:bg-opacity-80 focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-90"},ze={class:"px-4 py-2 text-sm font-medium text-white bg-orange-500 rounded-md hover:bg-opacity-80 focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-90"},Be={__name:"AdminPoll",props:{p:{type:Object,required:!0}},emits:["deletePolls"],setup(m,{emit:t}){const{p:l}=m,d=()=>{confirm("Are you sure you want to delete this poll?")&&t("deletePolls",l._id)},_=()=>{confirm("Are you sure you want to reset this poll?")&&t("resetVotes",l._id)};return(x,y)=>(c(),r("div",null,[e("img",{class:"mx-auto rounded-lg h-36 aspect-square",src:`https://drive.google.com/uc?id=${m.p.image.substr(32,33)}`,alt:""},null,8,we),e("h1",Ve,$(m.p.question),1),m.p.options?(c(),r("div",Ce,[e("div",Pe,[(c(!0),r(k,null,q(m.p.options,u=>(c(),r("div",{class:"px-3 py-2 border rounded-lg",key:u._id},[e("div",qe,[e("div",Ue,[u.image?(c(),r("div",Ae,[e("img",{class:"h-20 rounded-lg aspect-square",src:`https://drive.google.com/uc?id=${u.image.substr(32,33)}`,alt:""},null,8,Oe)])):U("",!0),e("p",De,$(u.text),1)]),Se]),e("div",je,[e("progress",{class:"progress progress-info",max:"100",value:u.percentage},null,8,Ie),e("p",Ee,$(u.percentage)+"%",1)]),e("div",Le,[i(I,{optionId:u._id},null,8,["optionId"]),e("button",Me," Votes: "+$(u.votes),1)])]))),128))])])):U("",!0),e("div",We,[e("div",Ne,[e("button",Qe," Status: "+$(m.p.status.toUpperCase()),1),e("button",ze," Total: "+$(m.p.totalVotes),1),i(ke,{epoll:m.p},null,8,["epoll"]),e("button",{onClick:d,class:"px-4 py-2 text-sm font-medium text-white bg-red-500 rounded-md hover:bg-opacity-80 focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-90"},"Delete"),e("button",{onClick:_,class:"px-4 py-2 text-sm font-medium text-white rounded-md bg-violet-500 hover:bg-opacity-80 focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-90"},"Reset")])])]))}},Te={key:0,class:"max-w-4xl py-10 mx-auto"},Fe={class:"flex justify-between my-3"},Ke=e("h1",{class:"text-2xl font-bold text-center"},"Polls",-1),Re={class:"space-y-5"},Ye={key:1,class:"max-w-2xl mx-auto card"},Ge={class:"form-control"},He=e("label",{for:""},[e("span",{class:"label-text"},"Enter Secret Key")],-1),Xe={__name:"Admin",setup(m){const t=g([]);let l=g(localStorage.getItem("voteadmin"));const d=g(""),_=()=>{d.value=="vote1234"?(l.value=!0,localStorage.setItem("voteadmin",!0)):alert("Wrong Password")},x=()=>{w.get("/polls").then(n=>{t.value=n.data.map(s=>(s.options=s.options.map(o=>(o.percentage=Math.round(o.votes/s.totalVotes*100)||0,o)),s))})};x();const y=n=>{w.delete(`/polls/${n}`).then(s=>{t.value=t.value.filter(o=>o._id!==n),x()})},u=n=>{w.delete(`/polls/${n}/reset`).then(s=>{x()}).catch(s=>{console.log(s)})};return(n,s)=>p(l)?(c(),r("div",Te,[e("div",Fe,[Ke,i(oe)]),e("div",Re,[(c(!0),r(k,null,q(t.value,o=>(c(),r("div",{key:o._id,class:"p-5 border border-gray-300"},[i(Be,{p:o,onDeletePolls:y,onResetVotes:u},null,8,["p"])]))),128))])])):(c(),r("div",Ye,[e("div",Ge,[He,b(e("input",{type:"text",placeholder:"Enter Secret Key",class:"input input-bordered","onUpdate:modelValue":s[0]||(s[0]=o=>d.value=o)},null,512),[[h,d.value]])]),e("button",{class:"mt-3 btn",onClick:_}," Continue ")]))}};export{Xe as default};
