import{r as g,o as a,e as c,f as e,q as d,x as h,h as m,y as A,z as U,U as O,Y as S,k as P,m as u,v,A as D,F as w,g as q,S as j,d as V,p as I,j as C,t as k,_ as E}from"./index-58045fb3.js";const M=e("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),L={class:"fixed inset-0 overflow-y-auto"},W={class:"flex items-center justify-center min-h-full p-4 text-center"},R={class:"mt-2"},N={class:"form-control"},Q=e("label",{for:"question",class:"label"},"Poll Question",-1),z={class:"form-control"},B=e("label",{for:"question",class:"label"},"Poll Question Image(Drive Link)",-1),T={class:"form-control"},F=e("label",{for:"question",class:"label"},"Poll Expiry Date",-1),K={class:"form-control"},Y={class:"cursor-pointer label"},G=e("span",{class:"label-text"},"Show Voters",-1),H=e("label",{for:"option",class:"label"},"Poll Option",-1),J=["onUpdate:modelValue"],X=e("label",{for:"option",class:"label"},"Poll Option Image Link(Drive)",-1),Z=["onUpdate:modelValue"],ee=e("label",{for:"option",class:"label"},"Poll Option Refference",-1),te=["onUpdate:modelValue"],oe={class:"my-2"},se=["onClick"],le=e("div",{class:"form-control"},[e("label",{for:"question",class:"label"},"Status"),e("select",{class:"select select-bordered"},[e("option",{value:"active"},"Active"),e("option",{value:"inactive"},"Inactive")])],-1),ne={__name:"CreatePoll",setup(f){const t=g({question:"",expiredAt:"",image:"",showVoters:!1,options:[{text:"",votes:0}]}),o=g(!1);function b(){o.value=!1}function _(){o.value=!0}function x(){V.post("/polls",t.value).then(i=>{console.log(i),b()}).catch(i=>{console.log(i)})}function y(){t.value.options.push({text:"",image:"",votes:0})}const r=i=>{t.value.options.splice(i,1)};return(i,l)=>(a(),c(w,null,[e("button",{type:"button",onClick:_,class:"px-4 py-2 text-sm font-medium text-white bg-black rounded-md hover:bg-opacity-30 focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75"}," Create Poll "),d(m(j),{appear:"",show:o.value,as:"template"},{default:h(()=>[d(m(A),{as:"div",onClose:b,class:"relative z-10"},{default:h(()=>[d(m(U),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:h(()=>[M]),_:1}),e("div",L,[e("div",W,[d(m(U),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:h(()=>[d(m(O),{class:"w-full max-w-md p-6 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl"},{default:h(()=>[d(m(S),{as:"h3",class:"text-lg font-medium leading-6 text-gray-900"},{default:h(()=>[P(" Create a Poll ")]),_:1}),e("div",R,[e("div",N,[Q,u(e("input",{type:"text","onUpdate:modelValue":l[0]||(l[0]=s=>t.value.question=s),placeholder:"What's the question?",class:"input input-bordered"},null,512),[[v,t.value.question]])]),e("div",z,[B,u(e("input",{type:"text","onUpdate:modelValue":l[1]||(l[1]=s=>t.value.image=s),placeholder:"Drive Link",class:"input input-bordered"},null,512),[[v,t.value.image]])]),e("div",T,[F,u(e("input",{type:"datetime-local","onUpdate:modelValue":l[2]||(l[2]=s=>t.value.expiredAt=s),placeholder:"",class:"input input-bordered"},null,512),[[v,t.value.expiredAt]])]),e("div",K,[e("label",Y,[G,u(e("input",{type:"checkbox",checked:"checked","onUpdate:modelValue":l[3]||(l[3]=s=>t.value.showVoters=s),class:"checkbox checkbox-primary"},null,512),[[D,t.value.showVoters]])])]),(a(!0),c(w,null,q(t.value.options,(s,n)=>(a(),c("div",{key:n,class:"form-control"},[H,u(e("input",{type:"text","onUpdate:modelValue":p=>t.value.options[n].text=p,class:"input input-bordered",placeholder:"What's the option?"},null,8,J),[[v,t.value.options[n].text]]),X,u(e("input",{type:"text","onUpdate:modelValue":p=>t.value.options[n].image=p,class:"input input-bordered",placeholder:"What's the option?"},null,8,Z),[[v,t.value.options[n].image]]),ee,u(e("input",{type:"text","onUpdate:modelValue":p=>t.value.options[n].refference=p,class:"input input-bordered",placeholder:"Refference"},null,8,te),[[v,t.value.options[n].refference]]),e("div",oe,[e("button",{class:"bg-red-500 btn btn-sm btn-error",onClick:p=>r(n)}," delete ",8,se)])]))),128)),e("div",{class:"mt-5"},[e("button",{onClick:y,class:"btn btn-sm"}," Add Option ")]),le]),e("div",{class:"mt-4 text-right"},[e("button",{type:"button",class:"inline-flex justify-center px-4 py-2 text-sm font-medium text-blue-900 bg-blue-100 border border-transparent rounded-md hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",onClick:x}," Create Poll "),P(),e("button",{type:"button",class:"inline-flex justify-center px-4 py-2 text-sm font-medium text-blue-900 bg-blue-100 border border-transparent rounded-md hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",onClick:b}," Cancel ")])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])],64))}},ie=e("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),ae={class:"fixed inset-0 overflow-y-auto"},ce={class:"flex items-center justify-center min-h-full p-4 text-center"},re={class:"mt-2"},ue={class:"form-control"},de=e("label",{for:"question",class:"label"},"Poll Question",-1),pe={class:"form-control"},fe=e("label",{for:"question",class:"label"},"Poll Question Image(Drive Link)",-1),be={class:"form-control"},me=e("label",{for:"question",class:"label"},"Poll Expiry Date",-1),ve={class:"form-control"},he={class:"cursor-pointer label"},_e=e("span",{class:"label-text"},"Show Voters",-1),xe=e("label",{for:"option",class:"label"},"Poll Option",-1),ge=["onUpdate:modelValue"],ye=e("label",{for:"option",class:"label"},"Poll Option Image Link(Drive)",-1),$e=["onUpdate:modelValue"],ke=e("label",{for:"option",class:"label"},"Poll Option Refference",-1),we=["onUpdate:modelValue"],Ve={class:"my-2"},Pe=["onClick"],Ce={class:"form-control"},Ue=e("label",{for:"question",class:"label"},"Status",-1),qe=e("option",{value:"active"},"Active",-1),Ae=e("option",{value:"inactive"},"Inactive",-1),Oe=[qe,Ae],Se={__name:"EditPoll",props:{epoll:{type:Object,required:!0}},setup(f){const{epoll:t}=f,o=g({...t,expiredAt:t.expiredAt.split(".")[0]}),b=g(!1);function _(){b.value=!1}function x(){b.value=!0}function y(){V.put("/polls/"+t._id,o.value).then(l=>{console.log(l),_()}).catch(l=>{console.log(l)})}function r(){o.value.options.push({text:"",votes:0})}const i=l=>{o.value.options.splice(l,1)};return(l,s)=>(a(),c(w,null,[e("button",{type:"button",onClick:x,class:"px-4 py-2 text-sm font-medium text-white bg-black rounded-md hover:bg-opacity-30 focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75"}," Edit "),d(m(j),{appear:"",show:b.value,as:"template"},{default:h(()=>[d(m(A),{as:"div",onClose:_,class:"relative z-10"},{default:h(()=>[d(m(U),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:h(()=>[ie]),_:1}),e("div",ae,[e("div",ce,[d(m(U),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:h(()=>[d(m(O),{class:"w-full max-w-md p-6 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl"},{default:h(()=>[d(m(S),{as:"h3",class:"text-lg font-medium leading-6 text-gray-900"},{default:h(()=>[P(" Edit Poll ")]),_:1}),e("div",re,[e("div",ue,[de,u(e("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=n=>o.value.question=n),placeholder:"What's the question?",class:"input input-bordered"},null,512),[[v,o.value.question]])]),e("div",pe,[fe,u(e("input",{type:"text","onUpdate:modelValue":s[1]||(s[1]=n=>o.value.image=n),placeholder:"Drive Link",class:"input input-bordered"},null,512),[[v,o.value.image]])]),e("div",be,[me,u(e("input",{type:"datetime-local","onUpdate:modelValue":s[2]||(s[2]=n=>o.value.expiredAt=n),placeholder:"",class:"input input-bordered"},null,512),[[v,o.value.expiredAt]])]),e("div",ve,[e("label",he,[_e,u(e("input",{type:"checkbox",checked:"checked","onUpdate:modelValue":s[3]||(s[3]=n=>o.value.showVoters=n),class:"checkbox checkbox-primary"},null,512),[[D,o.value.showVoters]])])]),(a(!0),c(w,null,q(o.value.options,(n,p)=>(a(),c("div",{key:p,class:"form-control"},[xe,u(e("input",{type:"text","onUpdate:modelValue":$=>o.value.options[p].text=$,class:"input input-bordered",placeholder:"What's the option?"},null,8,ge),[[v,o.value.options[p].text]]),ye,u(e("input",{type:"text","onUpdate:modelValue":$=>o.value.options[p].image=$,class:"input input-bordered",placeholder:"What's the option?"},null,8,$e),[[v,o.value.options[p].image]]),ke,u(e("input",{type:"text","onUpdate:modelValue":$=>o.value.options[p].refference=$,class:"input input-bordered",placeholder:"Refference"},null,8,we),[[v,o.value.options[p].refference]]),e("div",Ve,[e("button",{class:"bg-red-500 btn btn-sm btn-error",onClick:$=>i(p)}," delete ",8,Pe)])]))),128)),e("div",{class:"mt-5"},[e("button",{onClick:r,class:"btn btn-sm"}," Add Option ")]),e("div",Ce,[Ue,u(e("select",{class:"select select-bordered","onUpdate:modelValue":s[4]||(s[4]=n=>o.value.status=n)},Oe,512),[[I,o.value.status]])])]),e("div",{class:"mt-4 text-right"},[e("button",{type:"button",class:"inline-flex justify-center px-4 py-2 text-sm font-medium text-blue-900 bg-blue-100 border border-transparent rounded-md hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",onClick:y}," Update Poll "),P(),e("button",{type:"button",class:"inline-flex justify-center px-4 py-2 text-sm font-medium text-blue-900 bg-blue-100 border border-transparent rounded-md hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",onClick:_}," Cancel ")])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])],64))}},De=["src"],je={class:"text-lg font-semibold text-center"},Ie={key:1,class:"mt-2 space-y-3"},Ee={class:"mt-5 space-y-5"},Me={class:"flex"},Le={class:"flex items-center flex-1"},We={key:0,class:"mr-2"},Re=["src"],Ne={class:"text-lg font-semibold"},Qe=e("div",null,null,-1),ze={class:"flex items-center w-full gap-3 mt-2"},Be=["value"],Te={class:"text-sm font-bold text-gray-900"},Fe={class:"flex gap-3"},Ke={class:"btn btn-sm"},Ye=["href"],Ge=e("span",{class:"material-icons"}," link ",-1),He=[Ge],Je={class:"flex justify-between mt-5"},Xe={class:"space-x-4 text-right"},Ze={class:"px-4 py-2 text-sm font-medium text-white rounded-md bg-emerald-500 hover:bg-opacity-80 focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-90"},et={class:"px-4 py-2 text-sm font-medium text-white bg-orange-500 rounded-md hover:bg-opacity-80 focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-90"},tt={__name:"AdminPoll",props:{p:{type:Object,required:!0}},emits:["deletePolls"],setup(f,{emit:t}){const{p:o}=f,b=()=>{confirm("Are you sure you want to delete this poll?")&&t("deletePolls",o._id)},_=()=>{confirm("Are you sure you want to reset this poll?")&&t("resetVotes",o._id)};return(x,y)=>(a(),c("div",null,[f.p.image?(a(),c("img",{key:0,class:"mx-auto rounded-lg h-36 aspect-square",src:`https://drive.google.com/uc?id=${f.p.image.substr(32,33)}`,alt:""},null,8,De)):C("",!0),e("h1",je,k(f.p.question),1),f.p.options?(a(),c("div",Ie,[e("div",Ee,[(a(!0),c(w,null,q(f.p.options,r=>(a(),c("div",{class:"px-3 py-2 border rounded-lg",key:r._id},[e("div",Me,[e("div",Le,[r.image?(a(),c("div",We,[e("img",{class:"h-20 rounded-lg aspect-square",src:`https://drive.google.com/uc?id=${r.image.substr(32,33)}`,alt:""},null,8,Re)])):C("",!0),e("p",Ne,k(r.text),1)]),Qe]),e("div",ze,[e("progress",{class:"progress progress-info",max:"100",value:r.percentage},null,8,Be),e("p",Te,k(r.percentage)+"%",1)]),e("div",Fe,[d(E,{optionId:r._id},null,8,["optionId"]),e("button",Ke," Votes: "+k(r.votes),1),P(),r.refference?(a(),c("a",{key:0,class:"ml-2 btn btn-circle btn-sm",href:r.refference,target:"_blank"},He,8,Ye)):C("",!0)])]))),128))])])):C("",!0),e("div",Je,[e("div",Xe,[e("button",Ze," Status: "+k(f.p.status.toUpperCase()),1),e("button",et," Total: "+k(f.p.totalVotes),1),d(Se,{epoll:f.p},null,8,["epoll"]),e("button",{onClick:b,class:"px-4 py-2 text-sm font-medium text-white bg-red-500 rounded-md hover:bg-opacity-80 focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-90"},"Delete"),e("button",{onClick:_,class:"px-4 py-2 text-sm font-medium text-white rounded-md bg-violet-500 hover:bg-opacity-80 focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-90"},"Reset")])])]))}},ot={key:0,class:"max-w-4xl py-10 mx-auto"},st={class:"flex justify-between my-3"},lt=e("h1",{class:"text-2xl font-bold text-center"},"Polls",-1),nt={class:"space-y-5"},it={key:1,class:"max-w-2xl mx-auto card"},at={class:"form-control"},ct=e("label",{for:""},[e("span",{class:"label-text"},"Enter Secret Key")],-1),ut={__name:"Admin",setup(f){const t=g([]);let o=g(localStorage.getItem("voteadmin"));const b=g(""),_=()=>{b.value=="vote1234"?(o.value=!0,localStorage.setItem("voteadmin",!0)):alert("Wrong Password")},x=()=>{V.get("/polls").then(i=>{t.value=i.data.map(l=>(l.options=l.options.map(s=>(s.percentage=Math.round(s.votes/l.totalVotes*100)||0,s)),l))}).catch(i=>{alert("Error: "+i.message)})};x();const y=i=>{V.delete(`/polls/${i}`).then(l=>{t.value=t.value.filter(s=>s._id!==i),x()})},r=i=>{V.delete(`/polls/${i}/reset`).then(l=>{x()}).catch(l=>{console.log(l)})};return(i,l)=>m(o)?(a(),c("div",ot,[e("div",st,[lt,d(ne)]),e("div",nt,[(a(!0),c(w,null,q(t.value,s=>(a(),c("div",{key:s._id,class:"p-5 border border-gray-300"},[d(tt,{p:s,onDeletePolls:y,onResetVotes:r},null,8,["p"])]))),128))])])):(a(),c("div",it,[e("div",at,[ct,u(e("input",{type:"text",placeholder:"Enter Secret Key",class:"input input-bordered","onUpdate:modelValue":l[0]||(l[0]=s=>b.value=s)},null,512),[[v,b.value]])]),e("button",{class:"mt-3 btn",onClick:_}," Continue ")]))}};export{ut as default};
